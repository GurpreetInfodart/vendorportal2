@using System.Web.Optimization
@using System.Data
@using VendorPortal.Models

@{
    ViewBag.Title = "VendorInfoAdmin";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}
<script src="~/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<style>
    .fileinput-button {
        position: relative;
        overflow: hidden;
        background-color: #398439;
        border-color: #255625;
    }

    .fileinput-button {
        background-color: #398439;
        border-color: #255625;
    }

        .fileinput-button input {
            position: absolute;
            top: 0;
            right: 0;
            margin: 0;
            opacity: 0;
            -ms-filter: 'alpha(opacity=0)';
            direction: ltr;
            cursor: pointer;
        }
</style>
<section class="content-header">
    <h1>
        Vendor
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Vendor</li>
    </ol>
</section>
<section class="content">
    <div class="row">
        <div class="col-md-12">
            <!-- general form elements -->
            <div class="box box-primary">
                <!-- form start -->

                <div class="box-body">
                    <div class="form-group">
                        <label for="exampleInputEmail1">Supplier Name</label>
                        <input type="text" class="form-control" id="txtsearch" placeholder="Supplier Name" onkeyup="filter();">
                    </div>

                </div>
                <!-- /.box-body -->

            </div>
            <!-- /.box -->
        </div>
        <div class="col-md-12">
            <div class="box box-primary">
                <!-- /.box-header -->
                <div class="table-responsive">
                    <div class="row">
                        <div class="col-md-6 col-md-6">
                            <span style="color:red; padding:3px; margin-top:1%;">@ViewBag.ErrorMsg</span>
                            <span style="color:green; padding:3px; margin-top:1%;">@ViewBag.Result</span>
                        </div>

                       

                    </div>
                    <table id="tblAppPackList" class="table table-bordered table-striped dataTable" role="grid" aria-describedby="example1_info">
                        <thead>
                            <tr role="row">
                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Rendering engine: activate to sort column ascending">S.No.</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Supplier Code</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Rendering engine: activate to sort column ascending" >Supplier Name</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Street</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >City</th>
                                
                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Postcode</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >District</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Country</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >VATRegno</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Tin</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >Telephone1</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Telephone2</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >Telephone3</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">FaxNo</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >Emailid</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">BankName</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >BankAddress</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">BankAccountNo</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >BankSwiftCode</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">BankCurrency</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >PaymentTerm</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">PaymentMethod</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >OrderCurrency</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">Incoterms</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >SchemaGroupVendor</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">ContactPerson</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >Telephone</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">GRbased</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >ERSVendor</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">OtherInformation1</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >OtherInformation2</th>
                                
                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending"  aria-sort="ascending">OtherInformation3</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >OtherInformation4</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending"  aria-sort="ascending">RequestedNAme</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >RequestedDepartment</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">RequestedDate</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >ApprovedName</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">ApprovedDepartment</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >ApprovedDate</th>
                               
                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" style="width: 122px;" aria-sort="ascending">TAN</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >PAN</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">GSTNO</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >SSIRegNo</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">ESICNo</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >CINNo</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">HSNCode</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >GLACNo</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">SortKey</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >WHTType</th>

                                <th class="sorting_asc" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column descending" aria-sort="ascending">TypeOfRecipient</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >ExemptionReason</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >CreatedOn</th>

                                <th class="sorting" tabindex="0" aria-controls="example1" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending" >Action</th>


                            </tr>
                        </thead>
                        <tbody></tbody>

                    </table>
                    
                </div>
                <!-- /.box-body -->
            </div>
        </div>
    </div>
</section>
<script type="text/javascript">
    GetSupplierList();

    function GetSupplierList() {       
        $.getJSON("@Url.Action("GetSupplierList", "Admin")", {  },
        function (list) {
            $('#tblAppPackList>tbody>tr').remove();
            $('#tblAppPackList tbody').empty();
            if (list.length > 0) {
                var ct = 0;
                $.each(list, function (index, itemData) {
                    ct = ct + 1;
                    $('#tblAppPackList>tbody').append('<tr id=' + ct + '><td>' + ct + '</td><td>' + itemData.SUPP_CODE + '</td> <td>' + itemData.SUPP_NAME + '</td>< td> ' + itemData.Street + '</td ><td >' + itemData.City + '</td> <td>' + itemData.PostCode + '</td><td>' + itemData.District + '</td><td>' + itemData.Country + '</td><td>' + itemData.VATRegNo + '</td><td>' + itemData.Tin + '</td><td>' + itemData.Telephone1 + '</td><td>' + itemData.Telephone2 + '</td><td>' + itemData.Telephone3 + '</td><td>' + itemData.FaxNo + '</td><td>' + itemData.Emailid + '</td><td>' + itemData.BankName + '</td><td>' + itemData.BankAddress + '</td><td>' + itemData.BankAccountNo + '</td><td>' + itemData.BankSwiftCode + '</td><td>' + itemData.BankCurrency + '</td><td>' + itemData.PaymentTerm + '</td><td>' + itemData.PaymentMethod + '</td><td>' + itemData.OrderCurrency + '</td><td>' + itemData.Incoterms + '</td><td>' + itemData.SchemaGroupVendor + '</td><td>' + itemData.ContactPerson + '</td><td>' + itemData.Telephone + '</td><td>' + itemData.GRbased + '</td><td>' + itemData.ERSVendor + '</td><td>' + itemData.OtherInformation1 + '</td><td>' + itemData.OtherInformation2 + '</td><td>' + itemData.OtherInformation3 + '</td><td>' + itemData.OtherInformation4 + '</td><td>' + itemData.RequestedName + '</td><td>' + itemData.RequestedDepartment + '</td><td></td><td>' + itemData.ApprovedName + '</td><td>' + itemData.ApprovedDepartment + '</td><td></td><td>' + itemData.TAN + '</td><td>' + itemData.PAN + '</td><td>' + itemData.GSTNO + '</td><td>' + itemData.SSIRegNo + '</td><td>' + itemData.ESICNo + '</td><td>' + itemData.CINNo + '</td><td>' + itemData.HSNCODE + '</td><td>' + itemData.GLACNo + '</td><td>' + itemData.SortKey + '</td><td>' + itemData.WHTType + '</td><td>' + itemData.TypeOfRecipient + '</td><td>' + itemData.ExemptionReason + '</td><td></td><td>' +  itemData.Id + '</td></tr > ');
                });
            }

        });
    }
    function ConvertJsonDateString(jsonDate,Active) {
        var shortDate = "";
        if (Active != 2 && Active != null && Active != "") {
            if (jsonDate) {
                if (jsonDate == "/Date(-2209008600000)/") {
                    return shortDate = "";
                }
                var regex = /-?\d+/;
                var matches = regex.exec(jsonDate);
                var dt = new Date(parseInt(matches[0]));
                var month = dt.getMonth() + 1;
                var monthString = month > 9 ? month : '0' + month;
                var day = dt.getDate();
                var dayString = day > 9 ? day : '0' + day;
                var year = dt.getFullYear();

                shortDate = dateString + '/' + monthString + '/' + year;
            }
        }
        return shortDate;
    };

    
    function ActionBtn(status, Id, Active)
    {
        if (status == false && Active == 1) return '<button id="App"  onclick="Approve(' + Id +')" class="btn btn-success btn-xs"><i class="fa fa-check" type="submit"></i></button>'
        else if (status == true && Active == 1 ) return '<button id="Del" onclick="DataDelete('+ Id +')"  class="btn btn-danger btn-xs"><i class="fa fa-trash-o " type="submit" )></i></button>';
    }
    function DataDelete(Id)
    {
        $.getJSON("@Url.Action("DeleteSupplier", "Admin")", {
            Id: Id, Tablecontentet :""
        },
        ); 
        GetSupplierList();
        Alter("Deleted Successfully")
    }
     function Approve(Id)
    {
        $.getJSON("@Url.Action("ApproveSupplier", "Admin")", {
            Id: Id, Tablecontentet :""
        },
         );
        GetSupplierList();
        Alter(" Successfully Approved")
    }

    function filter() {
        var searchText = $('#txtsearch').val();
        $.each($("#tblAppPackList tbody").find("tr"), function () {
            if ($(this).text().toLowerCase().replace(/\s+/g, '').indexOf(searchText.replace(/\s+/g, '').toLowerCase()) == -1)
                $(this).hide();
            else
                $(this).show();
        });
    }
</script>